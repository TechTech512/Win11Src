@if NOT DEFINED _echo echo off

REM *****************************
REM *** DO NOT EDIT THIS FILE ***
REM *****************************

REM *************************************************************************
REM *
REM * cpxupd.cmd
REM *
REM * Updates the Full Xbox Source tree so that it fully compiles
REM *
REM * Usage:
REM *   CpxXUpd.cmd {path to extract xbox tree}
REM *
REM * Examples:
REM *   CpxXUpd.cmd C:\XBOX
REM *
REM *************************************************************************

if "%1" == "-?" goto USAGE
if "%1" == "" goto USAGE

setlocal

set _location_=%1

REM CleanUp
del /f /q "%_location_%\private\p_build.cmd"
del /f /q "%_location_%\private\windbg.lnk"
del /s /f /q "%_location_%\copy *"
del /s /f /q "%_location_%\shortcut *"
rmdir /s /q "%_location_%\private\developr\template\old"

REM Update
xcopy /f /s /y private\*.* %_location_%\private\
xcopy /f /s /y public\*.* %_location_%\public\

if exist "%_location_%\public\lib-mar02\d3d8i.lib" (
    copy "%_location_%\public\lib-mar02\d3d8i.lib" "%_location_%\public\lib"
)

endlocal

goto DONE

:USAGE

echo.
echo Usage: CpxUpd.cmd {path to extract xbox tree}
echo.

:DONE
